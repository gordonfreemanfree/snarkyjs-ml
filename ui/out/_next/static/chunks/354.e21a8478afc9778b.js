"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[354,559,896],{3896:function(t,e,o){o.r(e),o.d(e,{InputImage:function(){return i}});var r=o(6400);class i extends r.wA{constructor(t){super(),this.value=this.num2Int64_t1(t)}num2Int64_t1(t){let e=[];return t.forEach((t,o)=>e[o]=this.num2Int64(t)),e}num2Int64(t){return(0,r.gN)(t)}}!function(t,e,o,r){var i,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(n<3?i(s):n>3?i(e,o,s):i(e,o))||s);n>3&&s&&Object.defineProperty(e,o,s)}([(0,r.Ae)(r.gN,64),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:type",Array)],i.prototype,"value",void 0)},1354:function(t,e,o){o.a(t,async function(t,r){try{o.r(e),o.d(e,{SmartSnarkyNet:function(){return u}});var i=o(6400),n=o(8559),s=o(3896),a=o(7101),l=t([n,a]);[n,a]=l.then?(await l)():l;var c=function(t,e,o,r){var i,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(n<3?i(s):n>3?i(e,o,s):i(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},f=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class u extends i.C3{constructor(){super(...arguments),this.classification=(0,i.ZM)(),this.layer1Hash=(0,i.ZM)(),this.layer2Hash=(0,i.ZM)()}deploy(t){super.deploy(t),this.setPermissions({...i.Pl.default(),editState:i.Pl.proofOrSignature()}),this.classification.set((0,i.gN)(0)),this.layer1Hash.set((0,i.gN)(0)),this.layer2Hash.set((0,i.gN)(0))}initState(t,e){super.init(),this.classification.set((0,i.gN)(0)),this.layer1Hash.set(i.jm.hash(t.toFields())),this.layer2Hash.set(i.jm.hash(e.toFields())),this.requireSignature()}predict(t,e,o){let r=new a.q([e,o]),n=this.classification.get();this.layer1Hash.assertEquals(n),this.layer1Hash.assertEquals(i.jm.hash(e.toFields()));let s=this.classification.get();this.layer2Hash.assertEquals(s),this.layer2Hash.assertEquals(i.jm.hash(o.toFields()));let l=r.predict(t);console.log("prediction: ",l);let c=(0,i.gN)(0),f=(0,i.gN)(0);[c,f]=i.dx.if(l[0].gt(l[1]),[l[0],(0,i.gN)(0)],(f=(0,i.gN)(1),[l[1],(0,i.gN)(1)]));let u=(0,i.gN)(0),h=(0,i.gN)(0);[u,h]=i.dx.if(c.gt(l[2]),[c,f],[l[2],(0,i.gN)(2)]);let g=(0,i.gN)(0),d=(0,i.gN)(0);[g,d]=i.dx.if(u.gt(l[3]),[u,h],[l[3],(0,i.gN)(3)]);let p=(0,i.gN)(0),y=(0,i.gN)(0);[p,y]=i.dx.if(g.gt(l[4]),[g,d],[l[4],(0,i.gN)(4)]);let _=(0,i.gN)(0),x=(0,i.gN)(0);[_,x]=i.dx.if(p.gt(l[5]),[p,y],[l[5],(0,i.gN)(5)]);let N=(0,i.gN)(0),v=(0,i.gN)(0);[N,v]=i.dx.if(_.gt(l[6]),[_,x],[l[6],(0,i.gN)(6)]);let m=(0,i.gN)(0),S=(0,i.gN)(0);[m,S]=i.dx.if(N.gt(l[7]),[N,v],[l[7],(0,i.gN)(7)]);let E=(0,i.gN)(0),w=(0,i.gN)(0);[E,w]=i.dx.if(m.gt(l[8]),[m,S],[l[8],(0,i.gN)(8)]);let b=(0,i.gN)(0),j=(0,i.gN)(0);[b,j]=i.dx.if(E.gt(l[9]),[E,w],[l[9],(0,i.gN)(9)]);let M=this.classification.get();this.classification.assertEquals(M),this.classification.set(j)}}c([(0,i.SB)(i.gN),f("design:type",Object)],u.prototype,"classification",void 0),c([(0,i.SB)(i.gN),f("design:type",Object)],u.prototype,"layer1Hash",void 0),c([(0,i.SB)(i.gN),f("design:type",Object)],u.prototype,"layer2Hash",void 0),c([i.UD,f("design:type",Function),f("design:paramtypes",[n.SnarkyLayer1,n.SnarkyLayer2]),f("design:returntype",void 0)],u.prototype,"initState",null),c([i.UD,f("design:type",Function),f("design:paramtypes",[s.InputImage,n.SnarkyLayer1,n.SnarkyLayer2]),f("design:returntype",void 0)],u.prototype,"predict",null),r()}catch(h){r(h)}})},8559:function(t,e,o){o.a(t,async function(t,r){try{o.r(e),o.d(e,{SnarkyLayer1:function(){return c},SnarkyLayer2:function(){return f}});var i=o(6400),n=o(2655),s=t([n]);n=(s.then?(await s)():s)[0];var a=function(t,e,o,r){var i,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(n<3?i(s):n>3?i(e,o,s):i(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},l=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class c extends n.J{constructor(t,e="relu",o=(0,i.gN)(10)){super(),this.activation=this.activation_selection(e),this.alpha=o,this.weights=t}call(t){return console.log("in the call function"),this.activation_t2(this.dot_product_t2(t,this.weights))}activation_selection(t){if("relu"==t)return this.relu_t1;if("relu_leaky"==t)return this.relu_leaky_t1;if("softmax"==t)return this.softmax_t1;throw Error("Activation Function Not Valid")}activation_t2(t){console.log("in the activation_t2 function");let e=[];return t.forEach((t,o)=>e[o]=this.relu_t1(t)),e}relu_t1(t){let e=[];return t.forEach((t,o)=>e[o]=t),e}relu_leaky_t1(t){let e=[];return t.forEach((t,o)=>e[o]=t),e}softmax_t1(t){console.log("in the softmax_t1 function"),console.log("x before exp part is",t.toString());let e=i.zM.zero,o=[];console.log("x before exp part is",t.toString());let r=[];return t.forEach((t,e)=>r[e]=i.zM.from(t).div(i.zM.from(1e6))),console.log("x after overflow prevention is",r.toString()),r.forEach(t=>console.log(this.exp(t).toString())),console.log("x after exp is",r.toString()),r.forEach(t=>e=e.add(this.exp(t))),console.log("sum is",e.toString()),r.forEach((t,r)=>{let i=this.exp(t).divMod(e);o[r]=i.rest}),console.log("result is",o.toString()),o}}a([(0,i.HM)(i.gN,64,10),l("design:type",Array)],c.prototype,"weights",void 0);class f extends n.J{constructor(t,e="relu",o=(0,i.gN)(10)){super(),this.activation=this.activation_selection(e),this.alpha=o,this.weights=t}call(t){return console.log("in the call function"),this.activation_t2(this.dot_product_t2(t,this.weights))}activation_selection(t){if("relu"==t)return this.relu_t1;if("relu_leaky"==t)return this.relu_leaky_t1;if("softmax"==t)return this.softmax_t1;throw Error("Activation Function Not Valid")}activation_t2(t){console.log("in the activation_t2 function");let e=[];return t.forEach((t,o)=>e[o]=this.relu_t1(t)),e}relu_t1(t){let e=[];return t.forEach((t,o)=>e[o]=t),e}relu_leaky_t1(t){let e=[];return t.forEach((t,o)=>e[o]=t),e}softmax_t1(t){console.log("in the softmax_t1 function"),console.log("x before exp part is",t.toString());let e=i.zM.zero,o=[];console.log("x before exp part is",t.toString());let r=[];return t.forEach((t,e)=>r[e]=i.zM.from(t).div(i.zM.from(1e6))),console.log("x after overflow prevention is",r.toString()),r.forEach(t=>console.log(this.exp(t).toString())),console.log("x after exp is",r.toString()),r.forEach(t=>e=e.add(this.exp(t))),console.log("sum is",e.toString()),r.forEach((t,r)=>{let i=this.exp(t).divMod(e);o[r]=i.rest}),console.log("result is",o.toString()),o}}a([(0,i.HM)(i.gN,10,10),l("design:type",Array)],f.prototype,"weights",void 0),r()}catch(u){r(u)}})},2655:function(t,e,o){o.a(t,async function(t,r){try{o.d(e,{J:function(){return n}});var i=o(6400);await i.DK;class n extends i.wA{constructor(t=(0,i.gN)(1e7)){super(),this.scale_factor_Field=t}dot_product_t2(t,e){console.log("in the dot product");let o=[],r=this.transpose(e);for(let i=0;i<t.length;i++){console.log("in the for loop",i);let n=[];for(let s=0;s<r.length;s++)console.log("in the for loop",s),n[s]=this.dot_product_t1(t[i],r[s]);o[i]=n}return o}dot_product_t1(t,e){let o=i.gN.zero;return console.assert(t.length===e.length,"tensor dimensions do not fit, can't do dot_product_t1"),t.forEach((t,r)=>o=o.add(t.mul(e[r]))),o}transpose(t){let e=[];for(let o=0;o<t[0].length;o++){let r=[];for(let i=0;i<t.length;i++)r[i]=t[i][o];e[o]=r}return e}exp_part(t,e,o){let r=i.zM.from(t);r=r.div(i.zM.from(o));for(let n=1;n<e;n++)r=(r=r.mul(t).div(i.zM.from(this.scale_factor_Field))).mul(i.zM.from(t));return r}exp(t){return i.zM.one.add(i.zM.from(t)).add(this.exp_part(t,2,2)).add(this.exp_part(t,3,6)).add(this.exp_part(t,4,24)).add(this.exp_part(t,5,120)).add(this.exp_part(t,6,720)).add(this.exp_part(t,7,5040))}}r()}catch(s){r(s)}},1)},7101:function(t,e,o){o.a(t,async function(t,r){try{o.d(e,{q:function(){return n}});var i=o(6400);await i.DK;class n extends i.wA{constructor(t){super(),this.layers=t}predict(t){console.log("in predict start");let e=[t.value];return console.log("in predict after num2Field_t2"),this.layers.forEach(t=>e=t.call(e)),console.log("in predict after layers.forEach"),e[0]}}r()}catch(s){r(s)}},1)}}]);